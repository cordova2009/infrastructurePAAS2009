#目的

该文档定义后台管理系统访问用户和平台资金数据接口，并指导开发。

#接口


##查询充值申请接口

查询提现申请记录。

1）请求说明

http请求方式: post


    http://IP:PORT/if/capitalManage/getRechargeApplyList


POST数据格式：JSON

    {
        "app":{
            "appId":"zjhtwallet",
            "timeStamp":"TIMESTAMP", 
            "nonce":"NONCE",
            "signature":"SIGNATURE"
        },
        "body":{
        }
    } 


2）返回说明

正常时的返回JSON数据包示例：
 
    {
        "errcode":0,"errmsg":"查询提现申请记录成功",
        "list":{
        	"userInfo":{
        		"token":"USER_TOKEN",
        		"nickname":"zhangsan",
        		"mobileNum":"13912345678"
        	}
        	"biddeeInfo":{
        		"biddeeId":"BIDDEE_ID",
        		"companyName":"深圳麦圈互动技术有限公司",
        		"shortName":"麦圈互动"
        	},
        	"bidderInfo":{
        		"bidderId":"BIDDER_ID",
        		"companyName":"深圳麦圈互动技术有限公司",
        		"shortName":"麦圈互动"
        	},
        	"orderId":"ORDER_ID",
            "createTime":"2015-10-10 10:00:00",
            "amount":"2000.00",
            "handingCharge":"20.00",
            "status":"DON",
            "remark":"已经银行转账，预计10月12日到账",
            "withdrawalsDate":"2015-10-12",
            "withdrawalsNo":"WITHDRAWAL_NO"
        }
    }

错误时的JSON数据包示例：

    {"errcode":10000,"errmsg":"查询提现申请记录失败，其它错误"}

参数|是否必须|说明
----|----|-----
orderId|是|充值申请订单编号
createTime|是|提现申请日期
amount|是|申请提现金额
handlingCharge|是|提现手续费
remark|是|备注
withdrawalsDate|是|转账日期
withdrawalsNo|是|转账凭证号


##查看充值申请详情接口

##充值申请审核接口

审核确认充值申请记录。

1）请求说明

http请求方式: post


    http://IP:PORT/if/capitalManage/checkRechargeApply


POST数据格式：JSON

    {
        "app":{
            "appId":"zjhtwallet",
            "timeStamp":"TIMESTAMP", 
            "nonce":"NONCE",
            "signature":"SIGNATURE"
        },
        "body":{
        	"orderId":"ORDER_ID",
        	"checkWithdrawalsNo":"CHECK_WITHDRAWALS_NO"
        	"checkResult":"OK#",
        	"remark":"完成充值申请审核，充值10000元",
            "operator":1
        }
    } 


2）返回说明

正常时的返回JSON数据包示例：
 
    {"errcode":0,"errmsg":"提交审核充值申请记录成功"}

错误时的JSON数据包示例：

    {"errcode":10000,"errmsg":"提交审核充值申请记录失败"}

参数|是否必须|说明
----|----|-----
orderId|是|充值申请订单编号
checkWithdrawalsNo|否|需要核对的凭证编号
checkResult|是|审核结果,审核成功OK#,审核失败 FLS
remark|是|备注
operator|是|操作人,t_ucenter_member表的id



##查询提现申请接口

##查看提现申请详情接口

##冻结提现接口

在用户发起提现申请时,冻结提现资金

1）请求说明

http请求方式: post


    http://IP:PORT/if/capitalManage/freezeWithdrawals


POST数据格式：JSON

    {
        "app":{
            "appId":"zjhtwallet",
            "timeStamp":"TIMESTAMP", 
            "nonce":"NONCE",
            "signature":"SIGNATURE"
        },
        "body":{
            "orderId":"ORDER_ID",
            "mobileNum":"13714770857",
            "tradePassword":"TRADE_PASSWORD",
            "peerAccountUnit":"中国银行",
            "peerAccountId":"20150101215522",
            "amount":100000,
            "remark":"完成提现申请审核，转账10000元"
        }
    } 

参数|是否必须|说明
----|----|-----
orderId|是|提现申请订单编号
tradePassword|是|交易密码
peerAccountUnit|是|提现到的银行名称
peerAccountId|是|提现到的银行帐号
amount|是|提现金额,单位分
remark|是|备注

2）返回说明

正常时的返回JSON数据包示例：
 
    {"errcode":0,"errmsg":"冻结提现成功","orderId":"dsfjidsfjds"}

错误时的JSON数据包示例：

    {"errcode":10000,"errmsg":"冻结提现失败"}

参数|是否必须|说明
----|----|-----
orderId|是|冻结提现订单编号




##提现申请审核接口

审核确认提现申请记录。由平台方在界面进行审核,并填入资料.

1）请求说明

http请求方式: post


    http://IP:PORT/if/capitalManage/checkWithdrawalsApply


POST数据格式：JSON

    {
        "app":{
            "appId":"zjhtwallet",
            "timeStamp":"TIMESTAMP", 
            "nonce":"NONCE",
            "signature":"SIGNATURE"
        },
        "body":{
        	"orderId":"ORDER_ID",
        	"transferTime":"2015-10-12",
            "voucherNo":"20150101215522",
            "amount":100000
            "voucherFileUrl":"VOCHER_FILE_URL"
        	"checkResult":"OK#",
        	"remark":"完成提现申请审核，转账10000元",
            "operator":1
        }
    } 


2）返回说明

正常时的返回JSON数据包示例：
 
    {"errcode":0,"errmsg":"审核提现申请记录成功"}

错误时的JSON数据包示例：

    {"errcode":10000,"errmsg":"审核提现申请记录失败"}

参数|是否必须|说明
----|----|-----
orderId|是|提现申请订单编号
transferTime|是|转账时间,单位天
voucherNo|是|转账凭证号
amount|是|提现金额,单位分
voucherFileUrl|是|凭证上传地址
remark|是|备注
checkResult|是|审核结果,审核成功OK#,审核失败 FLS
operator|是|操作人,t_ucenter_member表的id

##提现成功接口

平台方审核完,转帐完成后调用此接口

1）请求说明

http请求方式: post


    http://IP:PORT/if/capitalManage/successWithdrawals


POST数据格式：JSON

    {
        "app":{
            "appId":"zjhtwallet",
            "timeStamp":"TIMESTAMP", 
            "nonce":"NONCE",
            "signature":"SIGNATURE"
        },
        "body":{
            "orderId":"ORDER_ID",            
            "appOrderId":"审核id",            
            "remark":"完成提现申请审核，转账10000元"
        }
    } 

参数|是否必须|说明
----|----|-----
orderId|是|提现申请订单编号
appOrderId|是|审核的订单号
remark|是|备注

2）返回说明

正常时的返回JSON数据包示例：
 
    {"errcode":0,"errmsg":"提现成功","orderId":"dsfjidsfjds"}

错误时的JSON数据包示例：

    {"errcode":10000,"errmsg":"提现失败"}

参数|是否必须|说明
----|----|-----
orderId|是|提现成功的订单号



##提现失败接口

平台方审核完,发现不能提现时调用此接口,此接口会把冻结的钱返回到用户那里去

1）请求说明

http请求方式: post


    http://IP:PORT/if/capitalManage/failWithdrawals


POST数据格式：JSON

    {
        "app":{
            "appId":"zjhtwallet",
            "timeStamp":"TIMESTAMP", 
            "nonce":"NONCE",
            "signature":"SIGNATURE"
        },
        "body":{
            "orderId":"ORDER_ID",            
            "appOrderId":"审核id",            
            "remark":"提现申请审核不通过，帐号不正确"
        }
    } 

参数|是否必须|说明
----|----|-----
originalTable|否|关联表名
mobileNum|是|电话号码
orderId|是|提现申请订单编号
appOrderId|是|审核的订单号
remark|是|备注

2）返回说明

正常时的返回JSON数据包示例：
 
    {"errcode":0,"errmsg":"提现失败处理成功","orderId":"dsfjidsfjds"}

错误时的JSON数据包示例：

    {"errcode":10000,"errmsg":"提现失败处理失败"}

参数|是否必须|说明
----|----|-----
orderId|是|提现失败的订单号


##充值成功接口

平台方查到有转账记录,审核完成后调用此接口

1）请求说明

http请求方式: post


    http://IP:PORT/if/capitalManage/successRecharge


POST数据格式：JSON

    {
        "app":{
            "appId":"zjhtwallet",
            "timeStamp":"TIMESTAMP", 
            "nonce":"NONCE",
            "signature":"SIGNATURE"
        },
        "body":{
            "orderId":"ORDER_ID",            
            "appOrderId":"审核id",            
            "remark":"完成充值申请审核，转账10000元"
        }
    } 

参数|是否必须|说明
----|----|-----
orderId|是|提现申请订单编号
appOrderId|是|审核的订单号
remark|是|备注

2）返回说明

正常时的返回JSON数据包示例：
 
    {"errcode":0,"errmsg":"充值成功","orderId":"dsfjidsfjds"}

错误时的JSON数据包示例：

    {"errcode":10000,"errmsg":"充值失败"}

参数|是否必须|说明
----|----|-----
orderId|是|充值成功的订单号



##用户资金收入接口

此接口用于用户资金帐户收入

1）请求说明

http请求方式: post

    http://IP:PORT/if/capitalManage/UserAccountIncome


POST数据格式：JSON

    {
        "app":{
            "appId":"zjhtwallet",
            "timeStamp":"TIMESTAMP", 
            "nonce":"NONCE",
            "signature":"SIGNATURE"
        },
        "body":{
            "amount":5000000,
            "appOrderId":"fdsfdsfds",
            "userId":"2312"
        }
    } 


参数|是否必须|说明
----|----|-----
appId|是|应用ID
timestamp|是|时间戳
nonce|是|随机数
signature|是|签名值,MD5(按值的字典顺序排列组合成字符串(appId,appKey,app.nonce,app.timeStamp))
amount|是|收入资金
appOrderId|是|第三方应用id
userId|是|用户id


2）返回说明

正常时的返回JSON数据包示例：
 
    {
        "errcode":0,"errmsg":"平台方收入成功",
        "order":{
            "orderId":"ORDER_ID"
            "accountId":"1234123412341234",
            "type":"见数据库定义",
            "flowDirection":"OUT",
            "balance":"30000.00",
            "amount":"20000.00",
            "remark":"冻结30000元撮合担保金"
        }
    }

错误时的JSON数据包示例：

    {"errcode":10000,"errmsg":"平台方收入失败"}

参数|是否必须|说明
----|----|-----
orderId|是|账户流水订单编号
accountId|是|账号
type|是|交易类型
flowDirection|是|流向
balance|是|结余
amount|是|冻结金额
remark|是|备注



##转帐到平台方工程帐户接口

此接口用于用户工程帐户转帐到平台方的工程帐户

1）请求说明

http请求方式: post

    http://IP:PORT/if/capitalManage/transferToPlatformProjectPayment


POST数据格式：JSON

    {
        "app":{
            "appId":"zjhtwallet",
            "timeStamp":"TIMESTAMP", 
            "nonce":"NONCE",
            "signature":"SIGNATURE"
        },
        "body":{
            "amount":5000000,
            "appOrderId":"fdsfdsfds",
            "userId":"2312",
            "remark":"招标方工程款转入",
        }
    } 


参数|是否必须|说明
----|----|-----
appId|是|应用ID
timestamp|是|时间戳
nonce|是|随机数
signature|是|签名值,MD5(按值的字典顺序排列组合成字符串(appId,appKey,app.nonce,app.timeStamp))
amount|是|收入资金
appOrderId|是|第三方应用id
userId|是|用户id


2）返回说明

正常时的返回JSON数据包示例：
 
    {
        "errcode":0,"errmsg":"转帐到平台方工程帐户成功",
        "order":{
            "orderId":"ORDER_ID"
            "accountId":"1234123412341234",
            "type":"见数据库定义",
            "flowDirection":"OUT",
            "balance":"30000.00",
            "amount":"20000.00",
            "remark":"招标方工程款转入"
        }
    }

错误时的JSON数据包示例：

    {"errcode":10000,"errmsg":"转帐到平台方工程帐户失败"}

参数|是否必须|说明
----|----|-----
orderId|是|转出账户流水订单编号
accountId|是|转出账号
type|是|交易类型
flowDirection|是|流向
balance|是|结余
amount|是|冻结金额
remark|是|备注


##从平台方工程帐户转入接口

此接口用于平台方的工程帐户转帐到用户工程帐户

1）请求说明

http请求方式: post

    http://IP:PORT/if/capitalManage/transferFromPlatformProjectPayment


POST数据格式：JSON

    {
        "app":{
            "appId":"zjhtwallet",
            "timeStamp":"TIMESTAMP", 
            "nonce":"NONCE",
            "signature":"SIGNATURE"
        },
        "body":{
            "amount":5000000,
            "appOrderId":"fdsfdsfds",
            "userId":"2312",
            "remark":"招标方工程款转入"
        }
    } 


参数|是否必须|说明
----|----|-----
appId|是|应用ID
timestamp|是|时间戳
nonce|是|随机数
signature|是|签名值,MD5(按值的字典顺序排列组合成字符串(appId,appKey,app.nonce,app.timeStamp))
amount|是|收入资金
appOrderId|是|第三方应用id
userId|是|用户id
remark|是|备注


2）返回说明

正常时的返回JSON数据包示例：
 
    {
        "errcode":0,"errmsg":"从平台方工程帐户转入成功",
        "order":{
            "orderId":"ORDER_ID"
            "accountId":"1234123412341234",
            "type":"见数据库定义",
            "flowDirection":"IN#",
            "balance":"30000.00",
            "amount":"20000.00",
            "remark":"招标方工程款转入"
        }
    }

错误时的JSON数据包示例：

    {"errcode":10000,"errmsg":"从平台方工程帐户转入失败"}

参数|是否必须|说明
----|----|-----
orderId|是|转入账户流水订单编号
accountId|是|转入账号
type|是|交易类型
flowDirection|是|流向
balance|是|结余
amount|是|冻结金额
remark|是|备注


##工程帐户充值接口

此接口用于为用户的工程帐户进行充值

1）请求说明

http请求方式: post

    http://IP:PORT/if/capitalManage/projectPaymentIncome



POST数据格式：JSON

    {
        "app":{
            "appId":"zjhtwallet",
            "timeStamp":"TIMESTAMP", 
            "nonce":"NONCE",
            "signature":"SIGNATURE"
        },
        "body":{
            "amount":5000000,
            "appOrderId":"fdsfdsfds",
            "userId":"2312",
            "remark":"招标方工程款转入"
        }
    } 


参数|是否必须|说明
----|----|-----
appId|是|应用ID
timestamp|是|时间戳
nonce|是|随机数
signature|是|签名值,MD5(按值的字典顺序排列组合成字符串(appId,appKey,app.nonce,app.timeStamp))
amount|是|收入资金
appOrderId|是|第三方应用id
userId|是|用户id
remark|是|备注


2）返回说明

正常时的返回JSON数据包示例：
 
    {
        "errcode":0,"errmsg":"工程帐户充值成功",
        "order":{
            "orderId":"ORDER_ID"
            "accountId":"1234123412341234",
            "type":"见数据库定义",
            "flowDirection":"IN#",
            "balance":"30000.00",
            "amount":"20000.00",
            "remark":"招标方工程款转入"
        }
    }

错误时的JSON数据包示例：

    {"errcode":10000,"errmsg":"工程帐户充值失败"}

参数|是否必须|说明
----|----|-----
orderId|是|转入账户流水订单编号
accountId|是|转入账号
type|是|交易类型
flowDirection|是|流向
balance|是|结余
amount|是|冻结金额
remark|是|备注




##工程款提现成功接口

平台方审核完,转帐完成后调用此接口

1）请求说明

http请求方式: post


    http://IP:PORT/if/capitalManage/successProjectPaymentWithdrawals


POST数据格式：JSON

    {
        "app":{
            "appId":"zjhtwallet",
            "timeStamp":"TIMESTAMP", 
            "nonce":"NONCE",
            "signature":"SIGNATURE"
        },
        "body":{
            "orderId":"ORDER_ID",            
            "appOrderId":"审核id",            
            "remark":"完成提现申请审核，转账10000元"
        }
    } 

参数|是否必须|说明
----|----|-----
orderId|是|提现申请订单编号
appOrderId|是|审核的订单号
remark|是|备注

2）返回说明

正常时的返回JSON数据包示例：
 
    {"errcode":0,"errmsg":"工程款提现成功","orderId":"dsfjidsfjds"}

错误时的JSON数据包示例：

    {"errcode":10000,"errmsg":"工程款提现失败"}

参数|是否必须|说明
----|----|-----
orderId|是|提现成功的订单号



##工程款提现失败接口

平台方审核完,发现不能提现时调用此接口,此接口会把冻结的钱返回到用户那里去

1）请求说明

http请求方式: post


    http://IP:PORT/if/capitalManage/failProjectPaymentWithdrawals


POST数据格式：JSON

    {
        "app":{
            "appId":"zjhtwallet",
            "timeStamp":"TIMESTAMP", 
            "nonce":"NONCE",
            "signature":"SIGNATURE"
        },
        "body":{
            "orderId":"ORDER_ID",            
            "appOrderId":"审核id",            
            "remark":"提现申请审核不通过，帐号不正确"
        }
    } 

参数|是否必须|说明
----|----|-----
originalTable|否|关联表名
mobileNum|是|电话号码
orderId|是|提现申请订单编号
appOrderId|是|审核的订单号
remark|是|备注

2）返回说明

正常时的返回JSON数据包示例：
 
    {"errcode":0,"errmsg":"工程款提现失败处理成功","orderId":"dsfjidsfjds"}

错误时的JSON数据包示例：

    {"errcode":10000,"errmsg":"工程款提现失败处理失败"}

参数|是否必须|说明
----|----|-----
orderId|是|提现失败的订单号



##用户工程款帐户资金收入接口

此接口用于用户工程款资金帐户收入

1）请求说明

http请求方式: post

    http://IP:PORT/if/capitalManage/userProjectPaymentAccountIncome


POST数据格式：JSON

    {
        "app":{
            "appId":"zjhtwallet",
            "timeStamp":"TIMESTAMP", 
            "nonce":"NONCE",
            "signature":"SIGNATURE"
        },
        "body":{
            "amount":5000000,
            "appOrderId":"fdsfdsfds",
            "userId":"2312",
            "remark":"招标人于2015-11-11付工程款3456元"
        }
    } 


参数|是否必须|说明
----|----|-----
appId|是|应用ID
timestamp|是|时间戳
nonce|是|随机数
signature|是|签名值,MD5(按值的字典顺序排列组合成字符串(appId,appKey,app.nonce,app.timeStamp))
amount|是|收入资金
appOrderId|是|第三方应用id
userId|是|用户id


2）返回说明

正常时的返回JSON数据包示例：
 
    {
        "errcode":0,"errmsg":"平台方收入成功",
        "order":{
            "orderId":"ORDER_ID"
            "accountId":"1234123412341234",
            "type":"见数据库定义",
            "flowDirection":"OUT",
            "balance":"30000.00",
            "amount":"20000.00",
            "remark":"招标人于2015-11-11付工程款3456元"
        }
    }

错误时的JSON数据包示例：

    {"errcode":10000,"errmsg":"平台方收入失败"}

参数|是否必须|说明
----|----|-----
orderId|是|账户流水订单编号
accountId|是|账号
type|是|交易类型
flowDirection|是|流向
balance|是|结余
amount|是|冻结金额
remark|是|备注




