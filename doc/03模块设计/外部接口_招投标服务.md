#修订日志

修改日期|修改者|修改说明
------|------|-------
2015-10-12|doudou|Create.
2015-10-13|xuebing|Update.

#目的

该文档描述招投标服务模块提供对外访问的接口

#接口

###查询用户招标资质接口

用户招标前，前端网页通过该接口查询该用户是否有招标权限

1）请求说明

http请求方式: post

前置条件：用户必须先登录，

    http://ip:port/if/bid/queryPrivilegeOfInvitation


POST数据格式：JSON

    {
        "app":{
            "appId":"zjhtwallet",
            "timeStamp":"TIMESTAMP", 
            "nonce":"NONCE",
            "signature":"SIGNATURE"
        },
        "body":
        {
            "userId":2
        }

    } 


参数|是否必须|说明
----|----|-----
appId|是|应用ID
timestamp|是|时间戳
nonce|是|随机数
signature|是|签名值,MD5(按值的字典顺序排列组合成字符串(appId,appKey,app.nonce,app.timeStamp))
unionId|是|微信号
pageIndex|是|显示页数
pageSize|是|每页显示条数


2）返回说明

正常时的返回JSON数据包示例：
 
    {"errcode":0,"errmsg":"查询用户招标资质成功",
	"privilege":"false","remark":"非会员只能发布一次招标。"
    }

错误时的JSON数据包示例：

    {"errcode":10000,"errmsg":"查询用户招标资质失败，其它错误"}

参数|是否必须|说明
----|----|-----
privilege|是|是否具有资质
remark|否|备注，没有权限说明原因


3）实现说明

检查是否认证过招标方;检查是否为会员;非会员的时候，检查是否发布过一次标的。

###新增招标接口

前端页面通过该接口新增一个标的


http请求方式: postg


    http://ip:port/if/bid/addPrivilege


POST数据格式：JSON

    {
        "app":{
            "appId":"zjhtwallet",
            "timeStamp":"TIMESTAMP", 
            "nonce":"NONCE",
            "signature":"SIGNATURE"
        },        
        "body":
        {
	    "userId":2,	
	    "privilegeId":"36544789",
            "projectCategoryId":3,//工程类别
	    "projectName":"金域华府3期工程开发",
	    "projectNum":"ZF9767575645",
	    "objectName":"土石购买招标",
	    "objectEvaluate":300000000,
	    "predictTotalInvestment":800000000000,
	    "objectContent":"购买5吨水泥",
	    "projectAddress":"深圳龙华区民塘路",
	    "bidEvaluationMethod":"评标方法",
	    "picketageMethod":"定标方法",
	    "tenderbond":50000,
	    "projectIntroduce":"工程项目概况",
	    "enterpriseQualification":[{"certificateId":2,"certificateNum":4},{"certificateId":3,"certificateNum":2}],//企业资质要求
	    "objectPrincipalDemand":"项目负责人要求",
	    "performanceDemand":["demand":"jhaskfjg","demand":"sdghj"],//业绩要求
	    "importantNotification":"重要提示",
	    "objectPredictStartTime":"2015-05-23",
	    "objectPredictEndTime":"2015-06-24",
	    "privilegeMethod":"公开招标",
	    "inviteTender":["tenderId":1,"tenderId":2],//邀请投标
	    "noticeStartTime":"2015-04-10",
	    "noticeEndTime":"2015-04-25",
	    "tenderEndTime":"2015-04-25",
	    "openTime":"2015-04-30",
	    "projectCompany":"建设单位",
	    "projectCompanyAgent":"建设单位经办人",
	    "projectCompanyPhone":"1234523456",
	    "privilegeCompany":"招标方公司名称",
	    "privilegeCompanyAgent":"招标方单位经办人",
	    "privilegeCompanyPhone":"1234523456",
	    "attachments":[{"attachmentNme":"标书","attachmentUrl":"http://www.baidu.com"}],
	    "answer":{
		"QQ":"",
		"email":"",
		"address":"",
		"answerTime":"",
		"telPhone":"1387654"
	    },
	    "answerEndTime":"2015-05-23"
        }
    } 


参数|是否必须|说明
----|----|-----
appId|是|应用ID
timestamp|是|时间戳
nonce|是|随机数
signature|是|签名值,MD5(按值的字典顺序排列组合成字符串(appId,appKey,app.nonce,app.timeStamp))
userId|是|用户Id
privilegeId|否|招标Id
projectCategoryId|是|工程类别
projectName|是|工程名称
projectNum|是|工程编号
objectName|是|标的名称
objectEvaluate|是|标的估价
predictTotalInvestment|是|计划总投资
objectContent|是|标的内容
projectAddress|是|工程地址
bidEvaluationMethod|是|评标方法
picketageMethod|是|定标方法
tenderbond|是|投标保证金
projectIntroduce|是|工程项目概况
enterpriseQualification|是|企业资质要求
objectPrincipalDemand|是|项目负责人要求
performanceDemand|是|业绩要求
importantNotification|是|重要提示
objectPredictStartTime|是|工程计划开始时间
objectPredictEndTime|是|工程计划完成时间
privilegeMethod|是|招标方式
inviteTender|是|邀请招标的公司
noticeStartTime|是|公告开始时间
noticeEndTime|是|公告结束时间
tenderEndTime|是|投标截止时间
openTime|是|开标时间
projectCompany|否|建设单位
projectCompanyAgent|否|建设单位经办人
projectCompanyPhone|否|建设单位联系电话
privilegeCompany|否|招标方公司名称
privilegeCompanyAgent|否|招标方单位经办人
privilegeCompanyPhone|否|招标方单位联系电话
attachments.attachmentNme|是|附件名称
attachments.attachmentUrl|是|附件地址
answer.QQ|否|答疑qq
answer.email|否|答疑邮件
answer.address|否|答疑地址
answer.answerTime|否|答疑时间
answer.telPhone|否|答疑电话
answerEndTime|否|答疑截止时间

2）返回说明

正常时的返回JSON数据包示例：
 
    {"errcode":0,"errmsg":"招标信息保存成功",
	"privilegeId":"sa867543"
    }

错误时的JSON数据包示例：

    {"errcode":10000,"errmsg":"招标信息保存失败"}


###查询保证金

查询保证金并检查账户

1）请求说明

http请求方式: post

    http://ip:port/if/bid/query


POST数据格式：JSON

    {
        "app":{
            "appId":"zjhtwallet",
            "timeStamp":"TIMESTAMP", 
            "nonce":"NONCE",
            "signature":"SIGNATURE"
        },        
        "body":
        {
	    "objectEvaluate":30000000,
	    "userId":5
	    "type":"招标方"
        }
    } 


参数|是否必须|说明
----|----|-----
appId|是|应用ID
timestamp|是|时间戳
nonce|是|随机数
signature|是|签名值,MD5(按值的字典顺序排列组合成字符串(appId,appKey,app.nonce,app.timeStamp))
objectEvaluate|是|标的估价
type|是|招投标类型
userId|是|用户Id

2）返回说明

正常时的返回JSON数据包示例：
 
    {"errcode":0,"errmsg":"保证金查询成功",
    "bond":300000,
    "satisfy":true
    }


错误时的JSON数据包示例：

    {"errcode":10000,"errmsg":"保证金查询失败"}

参数|是否必须|说明
----|----|-----
bond|是|保证金金额
satisfy|是|账户余额是否足够

###发布招标接口

发布招标

1）请求说明

http请求方式: post

    http://ip:port/if/bid/completePrivilege


POST数据格式：JSON

    {
        "app":{
            "appId":"zjhtwallet",
            "timeStamp":"TIMESTAMP", 
            "nonce":"NONCE",
            "signature":"SIGNATURE"
        },        
        "body":
        {
            "userId":4,
	    "privilegeId":"zb90887",
	    "bond":300000
        }
    } 


参数|是否必须|说明
----|----|-----
appId|是|应用ID
timestamp|是|时间戳
nonce|是|随机数
signature|是|签名值,MD5(按值的字典顺序排列组合成字符串(appId,appKey,app.nonce,app.timeStamp))
userId|是|用户Id 
privilegeId|是|招标记录Id 
bond|是|保证金


2）返回说明

正常时的返回JSON数据包示例：
 
    {"errcode":0,"errmsg":"标的发布成功"}


错误时的JSON数据包示例：

    {"errcode":10000,"errmsg":"标的发布失败"}


###查询招标列表接口

进入我要投标，查看招标列表


http请求方式: post

    http://ip:port/if/bid/queryPrivilegeList


POST数据格式：JSON

    {
        "app":{
            "appId":"zjhtwallet",
            "timeStamp":"TIMESTAMP", 
            "nonce":"NONCE",
            "signature":"SIGNATURE"
        }
    } 


参数|是否必须|说明
----|----|-----
appId|是|应用ID
timestamp|是|时间戳
nonce|是|随机数
signature|是|签名值,MD5(按值的字典顺序排列组合成字符串(appId,appKey,app.nonce,app.timeStamp))



2）返回说明

正常时的返回JSON数据包示例：
 
    {"errcode":0,"errmsg":"查询招标列表成功",
    "list":[{
	"projectCategoryId":3,
	"objectName":"7665",
	"objectEvaluate":30000000,
	"objectPredictStartTime":"2015-03-24",
	"objectPredictEndTime":"2015-08-30"}]
    }


错误时的JSON数据包示例：

    {"errcode":10000,"errmsg":"查询招标列表失败，其它错误"}


参数|是否必须|说明
----|----|-----
projectCategoryId|是|工程类别
objectName|是|标的名称
objectEvaluate|是|标的估计
objectPredictStartTime|是|标的计划开始时间
objectPredictEndTime|是|标的计划完成时间


###查询招标详情接口

查看招标详情


http请求方式: post

    http://ip:port/if/bid/queryPrivilegeDetail


POST数据格式：JSON

    {
        "app":{
            "appId":"zjhtwallet",
            "timeStamp":"TIMESTAMP", 
            "nonce":"NONCE",
            "signature":"SIGNATURE"
        },
	"body":{
	    "privilegeId":"sdfghjh"
	}

    } 


参数|是否必须|说明
----|----|-----
appId|是|应用ID
timestamp|是|时间戳
nonce|是|随机数
signature|是|签名值,MD5(按值的字典顺序排列组合成字符串(appId,appKey,app.nonce,app.timeStamp))
privilegeId|是|招标记录Id


2）返回说明

正常时的返回JSON数据包示例：
 
    {"errcode":0,"errmsg":"查询招标信息成功",
    "body":
        {
	    "privilegeId":"36544789",
            "projectCategoryId":3,
	    "projectName":"金域华府3期工程开发",
	    "projectNum":"ZF9767575645",
	    "objectName":"土石购买招标",
	    "objectEvaluate":300000000,
	    "predictTotalInvestment":800000000000,
	    "objectContent":"购买5吨水泥",
	    "projectAddress":"深圳龙华区民塘路",
	    "bidEvaluationMethod":"评标方法",
	    "picketageMethod":"定标方法",
	    "tenderbond":50000,
	    "projectIntroduce":"工程项目概况",
	    "enterpriseQualification":[{"certificateId":2,"certificateNum":4},{"certificateId":3,"certificateNum":2}],
	    "objectPrincipalDemand":"项目负责人要求",
	    "performanceDemand":["demand":"jhaskfjg","demand":"sdghj"],
	    "importantNotification":"重要提示",
	    "objectPredictStartTime":"2015-05-23",
	    "objectPredictEndTime":"2015-06-24",
	    "privilegeMethod":"公开招标",
	    "inviteTender":["tenderId":1,"tenderId":2],
	    "noticeStartTime":"2015-04-10",
	    "noticeEndTime":"2015-04-25",
	    "tenderEndTime":"2015-04-25",
	    "openTime":"2015-04-30",
	    "projectCompany":"建设单位",
	    "projectCompanyAgent":"建设单位经办人",
	    "projectCompanyPhone":"1234523456",
	    "privilegeCompany":"招标方公司名称",
	    "privilegeCompanyAgent":"招标方单位经办人",
	    "privilegeCompanyPhone":"1234523456",
	    "attachments":[{"attachmentNme":"标书","attachmentUrl":"http://www.baidu.com"}],
	    "answer":{
		"QQ":"",
		"email":"",
		"address":"",
		"answerTime":"",
		"telPhone":"1387654"
	    },
	    "answerEndTime":"2015-05-23"
        }
    } 
    }


错误时的JSON数据包示例：

    {"errcode":10000,"errmsg":"查询招标信息失败，其它错误"}


参数|是否必须|说明
----|----|-----
privilegeId|否|招标Id
projectCategoryId|是|工程类别
projectName|是|工程名称
projectNum|是|工程编号
objectName|是|标的名称
objectEvaluate|是|标的估价
predictTotalInvestment|是|计划总投资
objectContent|是|标的内容
projectAddress|是|工程地址
bidEvaluationMethod|是|评标方法
picketageMethod|是|定标方法
tenderbond|是|投标保证金
projectIntroduce|是|工程项目概况
enterpriseQualification|是|企业资质要求
objectPrincipalDemand|是|项目负责人要求
performanceDemand|是|业绩要求
importantNotification|是|重要提示
objectPredictStartTime|是|工程计划开始时间
objectPredictEndTime|是|工程计划完成时间
privilegeMethod|是|招标方式
inviteTender|是|邀请招标的公司
noticeStartTime|是|公告开始时间
noticeEndTime|是|公告结束时间
tenderEndTime|是|投标截止时间
openTime|是|开标时间
projectCompany|否|建设单位
projectCompanyAgent|否|建设单位经办人
projectCompanyPhone|否|建设单位联系电话
privilegeCompany|否|招标方公司名称
privilegeCompanyAgent|否|招标方单位经办人
privilegeCompanyPhone|否|招标方单位联系电话
attachments.attachmentNme|是|附件名称
attachments.attachmentUrl|是|附件地址
answer.QQ|否|答疑qq
answer.email|否|答疑邮件
answer.address|否|答疑地址
answer.answerTime|否|答疑时间
answer.telPhone|否|答疑电话
answerEndTime|否|答疑截止时间


###查询用户投标资质接口

查询用户是否有投标的资质

1）请求说明

http请求方式: post

前置条件：用户必须先登录，

    http://ip:port/if/bid/queryPrivilegeOfInvitation


POST数据格式：JSON

    {
        "app":{
            "appId":"zjhtwallet",
            "timeStamp":"TIMESTAMP", 
            "nonce":"NONCE",
            "signature":"SIGNATURE"
        },
        "body":
        {
            "userId":2,
	    "":"34578"
        }

    } 


参数|是否必须|说明
----|----|-----
appId|是|应用ID
timestamp|是|时间戳
nonce|是|随机数
signature|是|签名值,MD5(按值的字典顺序排列组合成字符串(appId,appKey,app.nonce,app.timeStamp))
userId|是|用户Id
privilegeId|是|招标记录Id


2）返回说明

正常时的返回JSON数据包示例：
 
    {"errcode":0,"errmsg":"查询用户招标资质成功",
	"privilege":"false",
	"remark":"非会员只能发布一次招标。"
	"qualification":[{"certificateName":"","certificateNum":4},{"certificateName":"","certificateNum":2}]
    }

错误时的JSON数据包示例：

    {"errcode":10000,"errmsg":"查询用户招标资质失败，其它错误"}

参数|是否必须|说明
----|----|-----
privilege|是|是否具有资质
remark|否|备注，没有权限说明原因
qualification.certificateName|否|缺少的资质名称
qualification.certificateNum|否|缺少的资质证书


###查询用户投标需要填写的内容接口

查询投标界面的内容

1）请求说明

http请求方式: post

前置条件：用户必须先登录，

    http://ip:port/if/bid/queryTenderContent


POST数据格式：JSON

    {
        "app":{
            "appId":"zjhtwallet",
            "timeStamp":"TIMESTAMP", 
            "nonce":"NONCE",
            "signature":"SIGNATURE"
        },
        "body":
        {
	    "privilegeId":"34578"
        }

    } 


参数|是否必须|说明
----|----|-----
appId|是|应用ID
timestamp|是|时间戳
nonce|是|随机数
signature|是|签名值,MD5(按值的字典顺序排列组合成字符串(appId,appKey,app.nonce,app.timeStamp))
privilegeId|是|招标记录Id


2）返回说明

正常时的返回JSON数据包示例：
 
    {"errcode":0,"errmsg":"查询投标需要的信息成功",
	"objectName":"34578",
	"performanceDemand":["demand":"jhaskfjg","demand":"sdghj"],
    }

错误时的JSON数据包示例：

    {"errcode":10000,"errmsg":"查询投标需要的信息失败，其它错误"}

参数|是否必须|说明
----|----|-----
privilege|是|是否具有资质
remark|否|备注，没有权限说明原因
objectName|否|标的名称
performanceDemand.demand|否|业绩要求


###新增投标接口

保存投标信息

1）请求说明

http请求方式: post

前置条件：用户必须先登录，

    http://ip:port/if/bid/addTender


POST数据格式：JSON

    {
        "app":{
            "appId":"zjhtwallet",
            "timeStamp":"TIMESTAMP", 
            "nonce":"NONCE",
            "signature":"SIGNATURE"
        },
        "body":
        {
            "userId":2,
	    "privilegeId":3,
	    "objcetOffer":5000000,
	    "performanceDemand":[{"":"jhaskfjg","demandUrl":"sdghj"}],
	    "objectStartTime":"",
	    "objectEndTime":""
	    "attachmentName":"",
	    "attachmentUrl":""
        }

    } 


参数|是否必须|说明
----|----|-----
appId|是|应用ID
timestamp|是|时间戳
nonce|是|随机数
signature|是|签名值,MD5(按值的字典顺序排列组合成字符串(appId,appKey,app.nonce,app.timeStamp))
userId|是|用户Id
privilegeId|是|招标记录Id
objcetOffer|是|工程报价
performanceDemand.demandName|否|业绩文件名称
performanceDemand.demandUrl|否|业绩文件地址
objectStartTime|是|标的预计开始时间
objectEndTime|是|标的预计完成时间				
attachmentName|是|工程方案文件名称
attachmentUrl|是|工程方案文件地址

2）返回说明

正常时的返回JSON数据包示例：
 
    {"errcode":0,"errmsg":"保存投标信息成功",
	"tenderId":"45678"
    }

错误时的JSON数据包示例：

    {"errcode":10000,"errmsg":"保存投标信息失败，其它错误"}

参数|是否必须|说明
----|----|-----
tenderId|投标记录Id

###发布投标接口

发布招标

1）请求说明

http请求方式: post

    http://ip:port/if/bid/completeTender


POST数据格式：JSON

    {
        "app":{
            "appId":"zjhtwallet",
            "timeStamp":"TIMESTAMP", 
            "nonce":"NONCE",
            "signature":"SIGNATURE"
        },        
        "body":
        {
            "userId":4,
	    "tenderId":"zb90887",
	    "bond":300000
        }
    } 


参数|是否必须|说明
----|----|-----
appId|是|应用ID
timestamp|是|时间戳
nonce|是|随机数
signature|是|签名值,MD5(按值的字典顺序排列组合成字符串(appId,appKey,app.nonce,app.timeStamp))
userId|是|用户Id 
tenderId|是|投标记录Id 
bond|是|保证金


2）返回说明

正常时的返回JSON数据包示例：
 
    {"errcode":0,"errmsg":"投标发布成功"}


错误时的JSON数据包示例：

    {"errcode":10000,"errmsg":"投标发布失败"}

###打分和评价接口

发布招标

1）请求说明

http请求方式: post

    http://ip:port/if/bid/evaluate


POST数据格式：JSON

    {
        "app":{
            "appId":"zjhtwallet",
            "timeStamp":"TIMESTAMP", 
            "nonce":"NONCE",
            "signature":"SIGNATURE"
        },        
        "body":
        {
            "userId":4,
	        "tenderId":"zb90887",
	        "star":5,
	        "tags":"速度够快,质量很高",
	        "content":"合作愉快，期待下次继续！"
        }
    } 


参数|是否必须|说明
----|----|-----
userId|是|用户Id 
tenderId|是|投标记录Id 
star|是|评星数量，1-5 
tags|是|标签，以","分隔
content|是|评价内容


2）返回说明

正常时的返回JSON数据包示例：
 
    {"errcode":0,"errmsg":"评价成功"}


错误时的JSON数据包示例：

    {"errcode":10000,"errmsg":"评价失败，请重新再试！"}


