
#目的




#接口

##前端游客注册接口

###注册接口

游客注册成为会员的接口。
1）请求说明

http请求方式: post

    http://IP:PORT/if/register


POST数据格式：JSON

    {
        "nikeName":"nikename", 
        "mobileNum":"13912345678",
        "realName":"王亚锋",
        "cardID":"610522222222222838",
        "loginPWD":"123123123",
        "tradePWD":"ssssssss"
    }


参数|必须|说明
------|------|-------
cardID|是|注册人身份证号(aes)
mobileNum|是|注册人手机号码
loginPWD|是|登录密码(md5)
tradePWD|是|交易密码（ md5）
nikeName|是|昵称
realName|是|身份证名称(aes)

2）返回说明

正常时的返回JSON数据包示例：

    {
        "errcode":0,"errmsg":"用户注册成功",
        "user":{
            "userId":"12312",
            "mobileNum":"13912345678", 
            "nikeName":"nikename"
        }
    }

错误时的JSON数据包示例：

    {
        "errcode":10000,"errmsg":"用户开卡失败，其它错误"
    }


参数|必须|说明
----|----|----
userId|是|用户id
mobileNum|是|用户手机号码
nikeName|是|用户昵称



###游客登录接口

游客可通过页面进行登录，以会员身份查询系统信息。

1）请求说明

http请求方式: post

    http://IP:PORT/if/login


POST数据格式：JSON

    {
        "mobileNum":"13692228034",
        "loginPWD":"XXXXXXXX"
    }


参数|必须|说明
------|------|-------
mobileNum|是|注册用户的关联电话号码
loginPWD|是|登录密码（md5）

2）返回说明

正常时的返回JSON数据包示例：

    {
        "errcode":0,"errmsg":"登录成功",
        "user":{
            "userId":"12345678901234567890",
            "mobileNum":"13912345678", 
            "nikeName":"SH01",
            "level":"ST01"
        }
    }

错误时的JSON数据包示例：

    {
        "errcode":10000,"errmsg":"用户不存在或密码错误"
    }


参数|必须|说明
----|----|----
userId|是|用户ID
mobileNum|是|用户手机号码
nikeName|是|用户昵称
level|是|用户等级



###忘记密码

用户在忘记密码的时候可以通过网页重置登录密码，新密码邮件或短信发送到用户绑定手机。

1）请求说明


http请求方式: post

    http://IP:PORT/if/findpwd

>note:
>页面需做短信验证码校验，

POST数据格式：JSON

    {
            "mobileNum":"13912345678"
    }


参数|必须|说明
------|------|-------
mobileNum|是|重置密码的手机号

2）返回说明

正常时的返回JSON数据包示例：

    {
        "errcode":0,"errmsg":"重置成功"
    }

错误时的JSON数据包示例：

    {
        "errcode":10000,"errmsg":"用户不存在"
    }



###查看账户基础信息

本接口用来获取已经登录的用户基本信息。

1）请求说明


http请求方式: post

    http://IP:PORT/if/getBaseInfo




POST数据格式：JSON

    {
            "userid":"12345678900987654321"
    }


参数|必须|说明
------|------|-------
userid|是|用户编号


2）返回说明

正常时的返回JSON数据包示例：

    {
        "errcode":0,"errmsg":"交易撤销成功", 
        "user":{
            "userid":"ud12345678901234567890",
            "nikename":"SH12345",
            "realname":"ST12345",
            "cardID":"ZJ000001",
            "mobilenum":"zhangsan",
            "email":"123123123122132",
            "address":"1234567890123456789",
            "headurl":"http://xxxx.xxx/head.jpg"
        }
    }

错误时的JSON数据包示例：

    {
        "errcode":10000,"errmsg":"用户不存在",
    }

参数|必须|说明
----|----|----
userid|是|用户ID
nikename|是|用户昵称
sellerId|是|用户身份证名称
realname|是|门店编码
cardID|是|身份证号
mobilenum|是|手机号码
email|是|邮箱
headurl|是|头像


###查询银行卡

该接口用来查看用户当前账号下关联的银行卡信息

1）请求说明


http请求方式: post

    http://IP:PORT/if/listBankCard


POST数据格式：JSON

    {
        "userid":"123123"
    }


参数|必须|说明
------|------|-------
userid|是|用户ID


2）返回说明

正常时的返回JSON数据包示例：

    {
        "errcode":0,"errmsg":"查询成功", 
        "contract":[{
            "cardNum":"123123123",
            "account":"深圳麦圈",
            "bankaddress":"招商银行科发支行"
        }]
        "outsource":[{
            "cardNum":"1231233123",
            "account":"深圳麦圈",
            "bankaddress":"招商银行梅林支行"
        }]
    }

错误时的JSON数据包示例：

    {
        "errcode":10000,"errmsg":"查询失败"
    }

参数|必须|说明
----|----|----
contract|是|承包方卡号列表
outsource|是|发包方卡号列表
account|是|账户名
bankaddress|是|开户行


###修改登录密码

用户自行修改登录密码接口，前提为，用户需记得当前密码。

1）请求说明


http请求方式: post

    http://IP:PORT/if/resetpwd


POST数据格式：JSON

    {   
            "userid":"13912345678",
            "oldpwd":"231EEREWQR",
            "newpwd":"GM01"
    }


参数|必须|说明
------|------|-------
userid|是|用户id
oldpwd|是|旧密码 密码需加密
newpwd|是|新密码 密码需加密

2）返回说明

正常时的返回JSON数据包示例：

    {
        "errcode":0,"errmsg":"密码重置成功"
    }

错误时的JSON数据包示例：

    {
        "errcode":10000,"errmsg":"旧密码错误"
    }



###修改手机号

用户修改绑定的手机号码

1）请求说明

http请求方式: post

    http://IP:PORT/if/changemobile


POST数据格式：JSON

    {
        "userid":"SH01",
        "oldmobilenum":"123123423123",
        "newmobilenum":"123123123123",
    }

参数|必须|说明
------|------|-------
userid|是|用户id
oldmobilenum|是|旧手机号
newmobilenum|是|新手机号


2）返回说明

正常时的返回JSON数据包示例：

   正常时的返回JSON数据包示例：

    {
        "errcode":0,"errmsg":"手机重置成功"
    }

错误时的JSON数据包示例：

    {
        "errcode":10000,"errmsg":"旧手机号码不存在"
    }



###修改邮箱

用户修改绑定的电子邮箱

1）请求说明

http请求方式: post

    http://IP:PORT/if/changeemail


POST数据格式：JSON

    {
        "userid":"SH01",
        "oldemail":"123123423123",
        "newemail":"123123123123",
    }

参数|必须|说明
------|------|-------
userid|是|用户id
oldemail|是|旧邮箱
newemail|是|新邮箱


2）返回说明

正常时的返回JSON数据包示例：

   正常时的返回JSON数据包示例：

    {
        "errcode":0,"errmsg":"邮箱修改成功"
    }

错误时的JSON数据包示例：

    {
        "errcode":10000,"errmsg":"邮箱设置失败"
    }



###重置密码

用户修改自己的交易密码

1）请求说明

http请求方式: post

    http://IP:PORT/if/changetradepwd


POST数据格式：JSON

    {
        "userid":"SH01",
        "oldpwd":"123123423123",
        "newpwd":"123123123123",
    }

参数|必须|说明
------|------|-------
userid|是|用户id
oldpwd|是|旧密码 密码需加密
newpwd|是|新密码 密码需加密


2）返回说明

正常时的返回JSON数据包示例：

   正常时的返回JSON数据包示例：

    {
        "errcode":0,"errmsg":"交易密码重置成功"
    }

错误时的JSON数据包示例：

    {
        "errcode":10000,"errmsg":"交易密码重置失败"
    }



###核实用户身份

用户注册时核实用户的身份证与名字是否是真实存在的

1）请求说明

http请求方式: post

    http://IP:PORT/if/verifyID


POST数据格式：JSON

    {
        "cardID":"61052222222238",
        "realname":"王亚锋"
     }

参数|必须|说明
------|------|-------
userid|是|身份证号
oldpwd|是|身份证姓名


2）返回说明

正常时的返回JSON数据包示例：

   正常时的返回JSON数据包示例：

    {
        "errcode":0,"errmsg":"验证成功"
    }

错误时的JSON数据包示例：

    {
        "errcode":10000,"errmsg":"身份证已经注册过"
    }


