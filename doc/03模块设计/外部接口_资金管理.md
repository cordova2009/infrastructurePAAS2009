#修订日志

修改日期|修改者|修改说明
------|------|-------
2015-10-12|doudou|Create.
2015-10-13|xuebing|Update.
 

#目的

该文档描述资金管理模块提供对外访问的接口

#接口

###充值申请
用户可以通过本接口完成提交充值的申请

1）请求说明

http请求方式: post

前置条件：用户必须先登录，

    http://ip:port/if/capitalmanage/rechargeApply


POST数据格式：JSON

    {
        "app":{
            "appId":"zjhtwallet",
            "timeStamp":"TIMESTAMP", 
            "nonce":"NONCE",
            "signature":"SIGNATURE"
        },
        "body":
        {
            "userId":2，
            "transferTime":"2015-10-12 13:01:01",
            "bankName":"中国银行",
            "voucherNo":"20150101215522",
			"amount":100000
        }

    } 


参数|是否必须|说明
----|----|-----
userId|是|用户Id
transferTime|是|转账时间
bankName|是|银行名称
voucherNo|是|转账凭证号
amount|是|充值金额,单位分

2）返回说明

正常时的返回JSON数据包示例：
 
    {"errcode":0,"errmsg":"提现申请成功"}

错误时的JSON数据包示例：

    {"errcode":10000,"errmsg":"提现申请失败，其它错误"}
    
###提现申请
用户可以通过本接口完成提交提现的申请

1）请求说明

http请求方式: post

前置条件：用户必须先登录，

    http://ip:port/if/capitalmanage/withdrawalsApply


POST数据格式：JSON

    {
        "app":{
            "appId":"zjhtwallet",
            "timeStamp":"TIMESTAMP", 
            "nonce":"NONCE",
            "signature":"SIGNATURE"
        },
        "body":
        {
            "userId":2，
			"amount":100000
        }

    } 


参数|是否必须|说明
----|----|-----
userId|是|用户Id
amount|是|提现金额,单位分

2）返回说明

正常时的返回JSON数据包示例：
 
    {"errcode":0,"errmsg":"提现申请成功"}

错误时的JSON数据包示例：

    {"errcode":10000,"errmsg":"提现申请失败，其它错误"}

###查询用户资金的交易记录

查询用户可用余额

1）请求说明

http请求方式: post

前置条件：用户必须先登录，

    http://ip:port/if/capitalmanage/transactionRecords


POST数据格式：JSON

    {
        "app":{
            "appId":"zjhtwallet",
            "timeStamp":"TIMESTAMP", 
            "nonce":"NONCE",
            "signature":"SIGNATURE"
        },
        "body":
        {
            "userId":2,
            "startTime":"2015-10-01 00:00:00",
            "endTime":"2015-10-12 23:59:59", 
            "pageIndex":0,
	        "pageSize":10
        }

    } 


参数|是否必须|说明
----|----|-----
userId|是|用户Id
startTime|否|开始时间
endTime|是|结束时间
pageIndex|否|页数
pageSize|否|每页显示条数


2）返回说明

正常时的返回JSON数据包示例：
 
    {"errcode":0,"errmsg":"查询资金交易记录成功",
	"list":[
	        {
				"add_time":"2015-09-19 08:21:28",
				"type":"",
				"income":"10000",
				"expenditure":"0",
				"balance":"2000",
				"comment":"xxxx"
			}
	    ]
    }

错误时的JSON数据包示例：

    {"errcode":10000,"errmsg":"查询资金交易记录失败，其它错误"}

参数|是否必须|说明
----|----|-----
add_time|是|交易时间
type|是|类型
income|是|收入
expenditure|是|支出
balance|是|结余
comment|是|备注

###查询用户可用余额接口

查询用户可用余额

1）请求说明

http请求方式: post

前置条件：用户必须先登录，

    http://ip:port/if/capitalmanage/queryPrivilegeOfInvitation


POST数据格式：JSON

    {
        "app":{
            "appId":"zjhtwallet",
            "timeStamp":"TIMESTAMP", 
            "nonce":"NONCE",
            "signature":"SIGNATURE"
        },
        "body":
        {
            "userId":2
        }

    } 


参数|是否必须|说明
----|----|-----
appId|是|应用ID
timestamp|是|时间戳
nonce|是|随机数
signature|是|签名值,MD5(按值的字典顺序排列组合成字符串(appId,appKey,app.nonce,app.timeStamp))
userId|是|用户Id



2）返回说明

正常时的返回JSON数据包示例：
 
    {"errcode":0,"errmsg":"查询用户招标资质成功",
	"availableAmount":345420
    }

错误时的JSON数据包示例：

    {"errcode":10000,"errmsg":"查询用户招标资质失败，其它错误"}

参数|是否必须|说明
----|----|-----
availableAmount|是|可用余额


##冻结现金接口

冻结现金

1）请求说明

http请求方式: post

前置条件：用户必须先登录，

    http://ip:port/if/capitalmanage/freezeAmount


POST数据格式：JSON

    {
        "app":{
            "appId":"zjhtwallet",
            "timeStamp":"TIMESTAMP", 
            "nonce":"NONCE",
            "signature":"SIGNATURE"
        },
        "body":
        {
            "userId":2,
	    "freezeAmount":50000
        }

    } 


参数|是否必须|说明
----|----|-----
appId|是|应用ID
timestamp|是|时间戳
nonce|是|随机数
signature|是|签名值,MD5(按值的字典顺序排列组合成字符串(appId,appKey,app.nonce,app.timeStamp))
userId|是|用户Id



2）返回说明

正常时的返回JSON数据包示例：
 
    {"errcode":0,"errmsg":"冻结现金成功"
    }

错误时的JSON数据包示例：

    {"errcode":10000,"errmsg":"冻结现金失败，其它错误"}




